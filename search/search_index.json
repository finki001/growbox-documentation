{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Overview","text":"<p>This is the collected knowledge for the Lodge 100 3 area grow setup</p>"},{"location":"#commands","title":"Commands","text":"<ul> <li><code>docker compose up -d</code> - Serve the project.</li> <li><code>docker run --rm -it -v ${PWD}:/docs squidfunk/mkdocs-material build</code> - Build the docs.</li> <li><code>docker run --rm -it -v ~/.ssh:/root/.ssh:ro -v ~/.ssh/config.docker:/root/.ssh/config:ro -v ${PWD}:/docs squidfunk/mkdocs-material gh-deploy</code> - deploy docs to github pages</li> </ul>"},{"location":"#project-layout","title":"Project layout","text":"<pre><code>mkdocs.yml    # The configuration file.\ndocs/\n    index.md  # The documentation homepage.\n    ...       # Other markdown pages, images and other files.\n</code></pre>"},{"location":"a/","title":"A.'s Growbox Documentation","text":"<p>in progress</p>"},{"location":"a/#components","title":"Components","text":"<ul> <li>\u00b5C: ESP32 with Tasmota32 firmware (base version should be enough with current configuration)</li> <li>Smart Meter for power consumption</li> <li>50W Grow Light: SANlight Q1W (230VAC)</li> <li>230VAC --&gt; 5VDC converter</li> <li>Temp + Humidity + Pressure Sensor: BME280</li> <li>Light Sensor: BH170</li> <li>5V -&gt; 3.3V DC converter </li> <li>DS18B20 + 4k7 resistor (to pull up signal to 3.3V, maybe even work without with only 1 Sensor)</li> <li>Extractor (230VAC) + ACF</li> </ul>"},{"location":"electronics/","title":"Getting started","text":"<p>Get yourself a ESP32 and flash Tasmota on it. Then come back here :)</p>"},{"location":"electronics/esp32-pinout/","title":"ESP32 pinout","text":""},{"location":"electronics/esp32-pinout/#my-current-configuration","title":"My current configuration","text":"GPIO Purpose Currently used for 1 None - 2 DS18B20 #1 3x DS18B20 3 None - 4 Relay 1 100W LED Bloom 5 Relay 6 20W IR Mother Plant 9 None - 10 None - 12 None - 13 Relay 8 26W Cutlings 14 None - 15 Relay 9 Main Pump 16 Relay 4 Main Fans (2x Monkey Fan) 17 Relay 5 60W Mother Plant 18 Relay 7 Mother Plant Fan 19 I2C SCL #2 BME280 Mother Plant 21 I2C SDA #2 BME280 Mother Plant 22 Relay 2 40W IR Bloom 23 Relay 3 40W UV Bloom 25 Relay 10 Cloner Pump 26 I2C SCL #1 BME280 + MLX90614 main 27 I2C SDA #1 BME280 + MLX90614 main 32 None - 33 None - 34 None - 35 None - 36 None - 39 None -"},{"location":"electronics/lights/","title":"Growlights","text":"<p>The growlights are all LEDs and use 24VDC (except the cutlings light which is 230V). Keep in mind that there is a difference between growth and bloom lights - the growth lights are more blueish and the bloom lights are more reddish.  </p>"},{"location":"electronics/lights/#60x60x160-area-main-chamber","title":"60x60x160 area (main chamber)","text":"<p>This is the left area - the main area (basically a DS60 tent)</p> <ul> <li>40W IR + 40W UV supplement (2x COL20IR + COL20UV) (note: UV may be a bit over dimensioned for 60x60 but we'll see)</li> </ul>"},{"location":"electronics/lights/#when-in-flowering-period","title":"When in flowering period","text":"<ul> <li>100W (5x 20W) Cosmorrow Bloom Kit (COM100FS)</li> </ul>"},{"location":"electronics/lights/#when-in-vegetative-period","title":"When in vegetative period","text":"<ul> <li>3x 20W Cosmorrow Grow Kit (TNO40GR)</li> </ul>"},{"location":"electronics/lights/#60x40x100-area-mother-plant","title":"60x40x100 area (mother plant)","text":"<ul> <li>2x / 3x 20W Cosmorrow Grow (COP2065)</li> <li>20W Infrared (COL20IR)</li> </ul>"},{"location":"electronics/lights/#60x40x60-area-aeroponic-cloner","title":"60x40x60 area (aeroponic cloner)","text":"<ul> <li>Factory TLED V2.0 26W 6500K Growth (link)</li> </ul>"},{"location":"electronics/pcb-schematic/","title":"PCB schematic","text":"<p>coming soon</p>"},{"location":"electronics/pcb-schematic/#components","title":"Components","text":"<ul> <li>230VAC --&gt; 24VDC</li> <li>8x relay board (used for 24VDC)</li> <li>4x relay board (used for 230VAC)</li> <li>2x Analog/I2C sensor board</li> <li>24VDC -&gt; 5VDC</li> <li>8x DC socket for grow lights, ventilation etc.</li> <li>5VDC --&gt; 3.3VDC</li> <li>ESP32 board</li> <li>2x snubber for pump relay</li> <li>2x 2 pin pump 230VAC socket</li> <li>1x AC in 3 pin</li> <li>1x 3 pin 230VAC out (26W growlight)</li> </ul>"},{"location":"electronics/pcb-schematic/#wiring-60x60","title":"Wiring 60x60","text":"<ul> <li>24VDC always on for extractor</li> <li>24VDC 1 -&gt; 2 for ventilation</li> <li>24VDC 1 -&gt; 5 for main light</li> <li>24VDC for UV</li> <li>24VDC for IR</li> <li>230VAC for pump</li> <li>2x I2C Sensor (BME280+MLX90614)</li> <li>1x analog Sensor water temp (DS18B20)</li> <li>Air stone hose</li> <li>Total relays needed: 5x: 4x 24VDC, 1x 230VAC</li> </ul>"},{"location":"electronics/pcb-schematic/#wiring-60x40","title":"Wiring 60x40","text":"<ul> <li>24VDC always on for extractor</li> <li>Total relays needed: 5x: 3x 24VDC, 2x 230VAC</li> </ul>"},{"location":"electronics/pcb-schematic/#wiring-60x40-cutlings","title":"Wiring 60x40 Cutlings","text":"<ul> <li>230VAC for pump</li> <li>230VAC for main light (with PE)</li> <li>2x relay 230VAC</li> </ul>"},{"location":"electronics/pcb-schematic/#wiring-60x40-mother-plant","title":"Wiring 60x40 Mother Plant","text":"<ul> <li>24VDC 1 -&gt; 2 for main light</li> <li>24VDC for IR</li> <li>24VDC for ventilation</li> <li>I2C Sensor (BME280)</li> <li>1x analog Sensor water temp (DS18B20)</li> <li>Air stone hose</li> <li>3x relay 24VDC</li> </ul>"},{"location":"electronics/pcb-schematic/#wiring-of-the-electronics-box","title":"Wiring of the electronics box","text":"<p>230VAC in --&gt; needed for the 2 230VAC pumps and the 230VAC grow light. 4x relay board used for that (proper montage is important here!). Apart from that only 24V downwards is needed. 24V is needed for: - the extractors which are running permanently - the remainder of the grow lights + ventilation (connected to 8x relay board)</p> <p>5V is needed for: - the 2 relay boards (4x/8x) - the ESP32 - the 2 I2C / sensor boards</p> <p>3.3V is needed for the DS18B20 sensors (<code>4.7k</code> pull up resistor from analog signal to 3.3VDD)</p>"},{"location":"electronics/pcb-schematic/#wire-strengths","title":"Wire strengths","text":"<p>16 AWG from 24V converter to distributor clamp. Should be able to handle all the load simultaneously.  Go directly to the relay board where there is the highest load (main grow lights) present - check if setup can be improved with t-clamps. Use cable ties to keep the cables in place and the space tidy. maybe some relay and/or sensor boards are stackable --&gt; check that if space usage can be optimized (with the plastic distance holders maybe)</p>"},{"location":"electronics/power-consumption/","title":"Power consumption","text":""},{"location":"electronics/power-consumption/#60x60-main-area-120w180w","title":"60x60 main area (<code>120W/180W</code>)","text":"<p><code>35W</code> extractor, <code>5W</code> monkey fans: <code>40W</code></p>"},{"location":"electronics/power-consumption/#growing-80w","title":"Growing (<code>80W</code>)","text":"<p><code>60W</code> average. Peak with UV/IR (never on at the same time): <code>80W</code></p>"},{"location":"electronics/power-consumption/#flowering-140w","title":"Flowering (<code>140W</code>)","text":"<p><code>100W</code> average. Peak with UV/IR (never on at the same time): <code>140W</code></p>"},{"location":"electronics/power-consumption/#60x40-area-130w","title":"60x40 area (<code>130W</code>)","text":"<p><code>15W</code> extractor, <code>5W</code> monkey fans: <code>20W</code></p>"},{"location":"electronics/power-consumption/#60x40-mother-plant-80w","title":"60x40 mother plant (<code>80W</code>)","text":"<p><code>60W</code> average. Peak with IR (never on at the same time): <code>80W</code></p>"},{"location":"electronics/power-consumption/#60x40-aero-cloner-30w","title":"60x40 aero cloner (<code>30W</code>)","text":"<p><code>26W</code> for the growlight, and let's say <code>4W</code> for the pump: <code>30W</code></p>"},{"location":"electronics/power-consumption/#monitoring","title":"Monitoring","text":"<p>I'm using a smart plug that supports measuring the total power consumption of the grow setup and is also Tasmota compatible: Tasmota Steckdose NOUS A1T</p> <p>An example payload would look like this:</p> <pre><code>{\n  \"Time\": \"2024-07-24T22:24:32\",\n  \"ENERGY\": {\n    \"TotalStartTime\": \"2024-01-04T15:00:40\",\n    \"Total\": 279.919,\n    \"Yesterday\": 2.499,\n    \"Today\": 2.29,\n    \"Period\": 11,\n    \"Power\": 126,\n    \"ApparentPower\": 178,\n    \"ReactivePower\": 125,\n    \"Factor\": 0.71,\n    \"Voltage\": 296,\n    \"Current\": 0.601\n  }\n}\n</code></pre>"},{"location":"electronics/relais-and-switches/","title":"Relais and Switches","text":"<p>Can be used for various grow LEDs, fans, pumps, extractors, etc\u2026 (also suitable for 230VAC). I use this one from Elegoo  one here with 8 channels.  Additionally I got some snubbers (link here) to eliminate high voltage spikes caused by switching on inductive loads (currently the 2 pumps)</p>"},{"location":"electronics/sensors/","title":"Sensors","text":""},{"location":"electronics/sensors/#temperature-sensors","title":"Temperature Sensors","text":"<ul> <li>MLX90614: infrared leaf temperature for VPD calculation (I2C), see Tasmota documentation for MLX90614. Warning: you need to compile the binary of Tasmota yourself because it doesn't include this feature in the default binaries. </li> <li>3x DS18B20: for water temperature (analog Sensor), look at Tasmota documentation for more infos and how to connect multiple sensors to one GPIO pin.   </li> </ul>"},{"location":"electronics/sensors/#temperaturehumidity-sensors","title":"Temperature/Humidity Sensors","text":"<ul> <li>2x BME280: temp, humidity and barometric pressure (I2C), see Tasmota documentation for BME280.   </li> </ul>"},{"location":"electronics/sensors/#tdsec-sensor","title":"TDS/EC Sensor","text":"<ul> <li>QCRobot TDS meter sensor, see Tamota documentation for Analog Pins. </li> </ul>"},{"location":"electronics/tasmota-rules/","title":"Tasmota Rules","text":"<p>See Tasmota rules documentation for more info (rules can also be set via <code>MQTT</code>).</p>"},{"location":"electronics/tasmota-rules/#current-lighting-ruleset-rule1","title":"Current Lighting Ruleset (<code>Rule1</code>)","text":"<pre><code>ON Time#Minute=600 DO POWER4 ON ENDON\nON Time#Minute=240 DO POWER4 OFF ENDON\nON Time#Minute=600 DO POWER9 ON ENDON\nON Time#Minute=240 DO POWER9 OFF ENDON\nON Time#Minute=585 DO POWER7 ON ENDON\nON Time#Minute=600 DO POWER7 OFF ENDON\nON Time#Minute=210 DO POWER7 ON ENDON\nON Time#Minute=220 DO POWER7 OFF ENDON\nON Time#Minute=230 DO POWER7 ON ENDON\nON Time#Minute=255 DO POWER7 OFF ENDON\nON Time#Minute=585 DO POWER8 ON ENDON\nON Time#Minute=600 DO POWER8 OFF ENDON\nON Time#Minute=210 DO POWER8 ON ENDON\nON Time#Minute=220 DO POWER8 OFF ENDON\nON Time#Minute=230 DO POWER8 ON ENDON\nON Time#Minute=255 DO POWER8 OFF ENDON\n</code></pre>"},{"location":"electronics/tasmota-rules/#current-pump-ruleset-rule2","title":"Current Pump Ruleset (<code>Rule2</code>)","text":"<pre><code>ON POWER10#Boot DO backlog POWER10 ON; RuleTimer1 60 ENDON ON Rules#Timer=1 DO backlog POWER10 OFF; RuleTimer2 240 ENDON ON Rules#Timer=2 DO backlog POWER10 ON; RuleTimer1 60 ENDON\n</code></pre> Relay Purpose Turned on at minute / time Turned off at minute / time POWER2 Mother Plant Light 600 / 10:00 240 / 04:00 POWER4 Main Light 600 / 10:00 240 / 04:00 POWER9 Cutlings Light 600 / 10:00 240 / 04:00 POWER7 IR Bloom 210 / 03:30 , 230 / 03:50, 585 / 9:45 220 / 03: 40, 255 / 04:15, 600 / 10:00 POWER8 IR Mother Plant 585 / 9:45 240 / 04:00"},{"location":"electronics/wiring/","title":"Wiring of the electronics","text":"<p>We need to take into account which cable dimensions we use for different loads -  most importantly here is the 100W grow light that we will use. </p>"},{"location":"electronics/wiring/#cable-dimensions","title":"Cable dimensions","text":"<p><code>0,75 mm\u00b2 (18 AWG)</code> is enough for 12A which which is enough for all the lights (100W/24V=4,16A). I use this set for wiring - features 3 colors and that's enough.</p>"},{"location":"electronics/wiring/#recommended-connection-terminals","title":"Recommended connection terminals","text":"<ul> <li>Split L, N and PE wires: 3 in, 6 out </li> <li>Connect anything up to 3 wires: 3 in, 3 out </li> <li>Distribute 24V/5V with GND: 2 in, 8 out </li> <li>Distribute 5V/GND: 1 in, 5 out </li> <li>230VAC in: Power plug terminal</li> </ul>"},{"location":"electronics/wiring/#jstdupont-connectors","title":"JST/Dupont connectors","text":"<p>For the sensors and other devices that require 5V we will use JST/Dupont connectors. This box should be enough for the beginning. Also consider getting a few meters of ribbon cable to connect all the low voltage peripherals. </p>"},{"location":"electronics/wiring/#dc-sockets-55mm-x-21mm","title":"DC sockets (5.5mm x 2.1mm)","text":"<p>To connect the lights and the ventilation we will use DC sockets that are connected to the relais </p>"},{"location":"electronics/actors/pumps/","title":"Pumps (~20W)","text":"<p>1 pump each for the aeroponic main system, the aeroponic cloner and the aeration of the nutrient solution for the mother plant.</p>"},{"location":"electronics/actors/pumps/#aero-main-pump","title":"Aero Main Pump","text":"<p>QWORK\u00ae Mini Wasserpumpen Ultraleise Tauchpumpe - 800 L/H \u2013 15 W</p>"},{"location":"electronics/actors/pumps/#aero-cloner-pump","title":"Aero Cloner Pump","text":""},{"location":"electronics/actors/pumps/#airstone-pump","title":"Airstone Pump","text":"<p>Hailea ACO-2201 Air Pump 1.8 W</p>"},{"location":"electronics/actors/ventilation/","title":"Ventilation (55.7W)","text":""},{"location":"electronics/actors/ventilation/#extraction","title":"Extraction","text":"<ul> <li>DF16E150 15W </li> <li>DF16E350 35W </li> </ul>"},{"location":"electronics/actors/ventilation/#filters","title":"Filters","text":"<ul> <li>1x 100m3/h</li> <li>1x 150m3/h</li> </ul>"},{"location":"electronics/actors/ventilation/#air-flow","title":"Air flow","text":"<p>2x MONKEY FAN 24V MF2X120 2.85W each (5.7W in total) </p>"},{"location":"electronics/converters/ac-dc/","title":"AC-DC Converter","text":"<p>The converter used for 230VAC to 24VDC (to power grow LEDs + ventilation) is this one from DUSKTEC that has 300W which is enough for lights&amp;co. </p>"},{"location":"electronics/converters/dc-dc/","title":"DC-DC Converter","text":"<p>The ESP32 and (some) sensors require 5V to operate.  The power supply that we have is 24V. To convert the 24V to 5V we will use a DC-DC converter. The converter that we will use is this one from Bauer Electronics. </p>"},{"location":"grow-knowledge/","title":"Important things to know","text":"<ul> <li>UV/IR supplement lights - how and why</li> <li>Leaf VPD</li> </ul> <p><code>const leafVPD = 0.61078 * Math.exp((msg.payload.MLX90614.OBJTMP / (msg.payload.MLX90614.OBJTMP + 237.3) * 17.2694)) - 0.61078 * Math.exp((msg.payload.BME280.Temperature / (msg.payload.BME280.Temperature + 237.3) * 17.2694)) * msg.payload.BME280.Humidity / 100.0;</code></p> <ul> <li>Cannabis problem guide</li> </ul>"},{"location":"grow-space/","title":"Lodge 100","text":"<p>I'm using the (unfortunately discontinued) Secret Jardin Lodge 100 as my growing tent.  It's a 100x60x160cm tent divided into 3 sections:</p> <ul> <li>60x60cm for the main area. This area is completely separated from the stacked 60x40cm areas so you can use a different light schedule there (e.g. 12/12 for flowering)</li> <li>60x40cm for the mother plant(s) or auto-flowering plant(s)</li> <li>60x40cm for the clones (above the mother plant)</li> </ul> Lodge 100LEFT side: 60x60 main areaRIGHT side: 60x40 stacked areas"},{"location":"grow-space/#my-currently-used-configuration","title":"My currently used configuration","text":"<p>These are the components I use for my current hydro/aero setup:</p>"},{"location":"grow-space/#dwc-setup-for-mother-plant-bottom-right","title":"DWC Setup for Mother plant (bottom right)","text":"<p>Growrilla DWC Hydro 19l. Used with an airstone powered by an Neptune Hydroponics air pump.</p>"},{"location":"grow-space/#aeroponic-cloner-for-cutlings-top-right","title":"Aeroponic Cloner for Cutlings (top right)","text":"<p>Nutriculture X-Stream Plant Aeroponic Unheated Propagator</p>"},{"location":"grow-space/#aeroponic-4-plant-setup-for-clones-left","title":"Aeroponic 4 plant setup for Clones (left)","text":"<p>Platinum Aero Star 40x40 with upgraded Pump (QWORK\u00ae Mini Wasserpumpen Ultraleise Tauchpumpe - 800 L/H \u2013 15 W) + 360\u00b0 nozzles</p>"},{"location":"nutrients-and-measurement/","title":"pH/EC measurement","text":"<p>If you choose to grow with (DWC) hydroponics or aeroponics you need to monitor your pH and EC levels. This is crucial for the health of your plants. The pH level of your nutrient solution determines how well your plants can absorb nutrients. The EC level of your nutrient solution determines how much nutrients are available to your plants.</p> <p>If you want to get started right away I can recommend you this Multiparameter Tester from Ueomul. </p>"},{"location":"nutrients-and-measurement/a-fertilizer/","title":"Base Nutrients","text":"<p>I'm using the plagron Hydro A+B for my nutrient solution according to following grow schedule (if longer vegetative phase wanted, just repeat week 2) </p>"},{"location":"nutrients-and-measurement/additives/","title":"Additives","text":"<ul> <li>Hydro Roots to get more roots</li> <li>Power Buds to get more buds</li> <li>Green Sensation 4 in one: more dense buds, heavier buds, more pest resistance and better nutrient intake</li> </ul>"},{"location":"software/","title":"Base requirements","text":""},{"location":"software/#docker","title":"Docker","text":"<p>TODO: add traefik config in compose file too (or maybe provide one without it)</p> <pre><code>services:\n  mosquitto:\n    image: eclipse-mosquitto:latest\n    container_name: mosquitto\n    restart: always\n    ports:\n      - \"1883:1883\"\n    volumes:\n      - mosquitto_data:/mosquitto/data\n      - mosquitto_logs:/mosquitto/log\n      - ./config:/mosquitto/config\n    command: mosquitto -c /mosquitto/config/mosquitto.conf\n    networks:\n      - iot\n\n  telegraf:\n    image: telegraf:latest\n    container_name: telegraf\n    restart: always\n    volumes:\n      - ./telegraf.conf:/etc/telegraf/telegraf.conf:ro\n    networks:\n      - iot\n    depends_on:\n      - mosquitto\n      - influxdb\n\n  influxdb:\n    image: influxdb:latest\n    restart: always\n    container_name: influxdb\n    volumes:\n      - influxdb_data:/var/lib/influxdb2\n      - influxdb_config:/etc/influxdb2\n    networks:\n      - iot\n      - back-tier\n    labels:\n      - \"traefik.enable=true\"\n      - \"traefik.docker.network=traefik\"\n      - \"traefik.frontend.rule=Host:&lt;your.influxdb.host&gt;\"\n      - \"traefik.port=8086\"\n    environment:\n      - DOCKER_INFLUXDB_INIT_MODE=setup\n      - DOCKER_INFLUXDB_INIT_USERNAME=admin\n      - DOCKER_INFLUXDB_INIT_PASSWORD=&lt;your-password&gt;\n      - DOCKER_INFLUXDB_INIT_ORG=ludi\n      - DOCKER_INFLUXDB_INIT_BUCKET=mqtt\n      - DOCKER_INFLUXDB_INIT_ADMIN_TOKEN=&lt;your-admin-token&gt;\n\n  grafana:\n    image: grafana/grafana\n    container_name: grafana\n    restart: always\n    labels:\n      - \"traefik.enable=true\"\n      - \"traefik.docker.network=traefik\"\n      - \"traefik.frontend.rule=Host:&lt;your.grafana.host&gt;\"\n      - \"traefik.port=3000\"\n    networks:\n      - iot\n      - back-tier\n    volumes:\n      - ./grafana-provisioning:/etc/grafana/provisioning\n      - grafana-data:/var/lib/grafana\n    environment:\n      GF_SECURITY_ADMIN_PASSWORD: &lt;your-admin-password&gt;\n    depends_on:\n      - influxdb\n\n  node-red:\n    image: nodered/node-red:latest\n    container_name: node-red\n    restart: always\n    ports:\n      - \"1880:1880\"\n    volumes:\n      - node_red_data:/data\n    networks:\n      - iot\n      - back-tier\n    labels:\n      - \"traefik.enable=true\"\n      - \"traefik.docker.network=traefik\"\n      - \"traefik.frontend.rule=Host:&lt;your.node-red.host&gt;\"\n      - \"traefik.port=1880\"\n      - \"traefik.frontend.entryPoints=https\"\n      - \"traefik.frontend.redirect.entryPoint=https\"\n      - \"traefik.frontend.redirect.permanent=true\"\n    environment:\n      - TZ=Europe/Vienna\n\nnetworks:\n  iot:\n  back-tier:\n    external:\n      name: traefik\n\nvolumes:\n  mosquitto_data:\n  mosquitto_logs:\n  influxdb_data:\n  influxdb_config:\n  grafana-data:\n  node_red_data:\n</code></pre>"},{"location":"software/grafana/","title":"Grafana","text":"<p>Displays the sensor data </p>"},{"location":"software/influxdb/","title":"InfluxDB","text":"<p>Saves the sensor data </p>"},{"location":"software/mosquitto/","title":"Eclipse Mosquitto","text":"<p>MQTT Broker</p>"},{"location":"software/node-red/","title":"Node-red","text":"<p>Flow editor for controlling/regulating environment conditions, lights + Pumps </p>"},{"location":"software/telegraf/","title":"Telegraf","text":"<p>used to persist MQTT data into InfluxDB</p>"}]}