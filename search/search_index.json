{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Hello fellow grower! \ud83c\udf31","text":"<p>This is the documentation for my own 3 area growbox project using this grow tent which unfortunately is discontinued. The controlling of all actors (lights, fans, pumps) and the monitoring via sensors (temperature, humidity, pH, etc.) is done by an ESP32 microcontroller running Tasmota.</p> Lodge 100 (100cm x 60cm x 160cm)LEFT side: 60cm x 60cm main areaRIGHT side: 60cm x 40cm stacked areas"},{"location":"#components","title":"Components","text":""},{"location":"#always-on","title":"Always on","text":"<ul> <li>2x extractors + filter (24VDC)</li> <li>humidifier with target humidity (for left/right area) (230VAC)</li> <li>air stone pump for mother plant (240VAC)</li> </ul>"},{"location":"#actors","title":"Actors","text":"<ul> <li>3 main grow lights (24VDC / 230VAC)</li> <li>Infrared supplement for main and mother plant area (24VDC)</li> <li>UV supplement for main area (24VDC)</li> <li>fans for ventilation - 2 in the main area and 1 for the mother plant (24VDC)</li> <li>pumps for main and cloner area (230VAC)</li> <li>Atlas Scientific dosing pump for pH regulation (24V, I\u00b2C)</li> </ul>"},{"location":"#sensors","title":"Sensors","text":"<ul> <li>BME280 for main and mother plant area (temperature, humidity, pressure) - I\u00b2C</li> <li>DS18B20 for each of the 3 water temperatures (main, mother plant, cloner) - analog</li> <li>MLX90614 for leaf surface temperature (for leaf VPD calculation) - I\u00b2C</li> <li>Atlas Scientific pH sensor - I\u00b2C</li> <li>Atlas Scientific EC sensor - I\u00b2C</li> </ul>"},{"location":"growtent/","title":"Lodge 100","text":"<p>I'm using the (unfortunately discontinued) Secret Jardin Lodge 100 as my growing tent.  It's a 100x60x160cm tent divided into 3 sections:</p> <ul> <li>60x60cm for the main area. This area is completely separated from the stacked 60x40cm areas so you can use a different light schedule there (e.g. 12/12 for flowering)</li> <li>60x40cm for the mother plant(s) or auto-flowering plant(s)</li> <li>60x40cm for the clones (above the mother plant)</li> </ul> Lodge 100LEFT side: 60x60 main areaRIGHT side: 60x40 stacked areas"},{"location":"growtent/#my-currently-used-configuration","title":"My currently used configuration","text":"<p>These are the components I use for my current hydro/aero setup:</p>"},{"location":"growtent/#dwc-setup-for-mother-plant-bottom-right","title":"DWC Setup for Mother plant (bottom right)","text":"<p>Growrilla DWC Hydro 19l. Used with an airstone powered by an Neptune Hydroponics air pump.</p>"},{"location":"growtent/#aeroponic-cloner-for-cutlings-top-right","title":"Aeroponic Cloner for Cutlings (top right)","text":"<p>Nutriculture X-Stream Plant Aeroponic Unheated Propagator</p>"},{"location":"growtent/#aeroponic-4-plant-setup-for-clones-left","title":"Aeroponic 4 plant setup for Clones (left)","text":"<p>Platinum Aero Star 40x40 with upgraded Pump (QWORK\u00ae Mini Wasserpumpen Ultraleise Tauchpumpe - 800 L/H \u2013 15 W) + 360\u00b0 nozzles</p>"},{"location":"hardware-and-software/","title":"Getting started","text":"<p>Tasmota is used for controlling the lights fans etc. and for monitoring sensor data (via MQTT) which is an open source firmware for ESP based devices. I'm using an ESP32 but it does not really matter if you use an ESP866 for example - most of the configurations are the same (apart from some minor details). It's documented quite well and also has a simple HTTP API if you prefer that over MQTT.1</p> <p>(Re)set password via serial monitor and reboot device: <code>Backlog SSID1 [SSID]; Password1 [PASSWORD]; Restart 1</code></p>"},{"location":"hardware-and-software/esp32-pinout/","title":"ESP32 pinout","text":""},{"location":"hardware-and-software/esp32-pinout/#my-current-configuration","title":"My current configuration","text":"GPIO Purpose Used for 1 None - 2 DS18B20 #1 2x DS18B20 (water temp left/right) 3 None - 4 Relay 1 100W LED Bloom 5 Relay 6 20W LED IR right 9 None - 10 None - 12 None - 13 Relay 8 100W SF1000D 14 None - 15 Relay 9 (Un)-pluggable maintenance pumps 16 Relay 4 2.85W left fans (2x Monkey Fan) 17 Relay 5 - 18 Relay 7 1.5W right fan 19 I2C SCL #2 BME280 right 21 I2C SDA #2 BME280 right 22 Relay 2 40W IR Bloom 23 Relay 3 40W UV Bloom 25 Relay 10 Main Pump 26 I2C SCL #1 BME280 + MLX90614 left 27 I2C SDA #1 BME280 + MLX90614 left 32 None - 33 None - 34 None - 35 None - 36 None - 39 None -"},{"location":"hardware-and-software/pcb-schematic/","title":"PCB schematic","text":"<p>coming soon</p>"},{"location":"hardware-and-software/pcb-schematic/#components","title":"Components","text":"<ul> <li>230VAC --&gt; 24VDC</li> <li>8x relay board (used for 24VDC)</li> <li>4x relay board (used for 230VAC)</li> <li>2x Analog/I2C sensor board</li> <li>24VDC -&gt; 5VDC</li> <li>8x DC socket for grow lights, ventilation etc.</li> <li>5VDC --&gt; 3.3VDC</li> <li>ESP32 board</li> <li>2x snubber for pump relay</li> <li>2x 2 pin pump 230VAC socket</li> <li>1x AC in 3 pin</li> <li>1x 3 pin 230VAC out (26W growlight)</li> </ul>"},{"location":"hardware-and-software/pcb-schematic/#wiring-60x60","title":"Wiring 60x60","text":"<ul> <li>24VDC always on for extractor</li> <li>24VDC 1 -&gt; 2 for ventilation</li> <li>24VDC 1 -&gt; 5 for main light</li> <li>24VDC for UV</li> <li>24VDC for IR</li> <li>230VAC for pump</li> <li>2x I2C Sensor (BME280+MLX90614)</li> <li>1x analog Sensor water temp (DS18B20)</li> <li>Air stone hose</li> <li>Total relays needed: 5x: 4x 24VDC, 1x 230VAC</li> </ul>"},{"location":"hardware-and-software/pcb-schematic/#wiring-60x40","title":"Wiring 60x40","text":"<ul> <li>24VDC always on for extractor</li> <li>Total relays needed: 5x: 3x 24VDC, 2x 230VAC</li> </ul>"},{"location":"hardware-and-software/pcb-schematic/#wiring-60x40-cutlings","title":"Wiring 60x40 Cutlings","text":"<ul> <li>230VAC for pump</li> <li>230VAC for main light (with PE)</li> <li>2x relay 230VAC</li> </ul>"},{"location":"hardware-and-software/pcb-schematic/#wiring-60x40-mother-plant","title":"Wiring 60x40 Mother Plant","text":"<ul> <li>24VDC 1 -&gt; 2 for main light</li> <li>24VDC for IR</li> <li>24VDC for ventilation</li> <li>I2C Sensor (BME280)</li> <li>1x analog Sensor water temp (DS18B20)</li> <li>Air stone hose</li> <li>3x relay 24VDC</li> </ul>"},{"location":"hardware-and-software/pcb-schematic/#wiring-of-the-electronics-box","title":"Wiring of the electronics box","text":"<p>230VAC in --&gt; needed for the 2 230VAC pumps and the 230VAC grow light. 4x relay board used for that (proper montage is important here!). Apart from that only 24V downwards is needed. 24V is needed for: - the extractors which are running permanently - the remainder of the grow lights + ventilation (connected to 8x relay board)</p> <p>5V is needed for: - the 2 relay boards (4x/8x) - the ESP32 - the 2 I2C / sensor boards</p> <p>3.3V is needed for the DS18B20 sensors (<code>4.7k</code> pull up resistor from analog signal to 3.3VDD)</p>"},{"location":"hardware-and-software/pcb-schematic/#wire-strengths","title":"Wire strengths","text":"<p>16 AWG from 24V converter to distributor clamp. Should be able to handle all the load simultaneously.  Go directly to the relay board where there is the highest load (main grow lights) present - check if setup can be improved with t-clamps. Use cable ties to keep the cables in place and the space tidy. maybe some relay and/or sensor boards are stackable --&gt; check that if space usage can be optimized (with the plastic distance holders maybe)</p>"},{"location":"hardware-and-software/power-consumption/","title":"Power consumption","text":""},{"location":"hardware-and-software/power-consumption/#60x60-main-area-120w180w","title":"60x60 main area (<code>120W/180W</code>)","text":"<p><code>35W</code> extractor, <code>5W</code> monkey fans: <code>40W</code></p>"},{"location":"hardware-and-software/power-consumption/#growing-80w","title":"Growing (<code>80W</code>)","text":"<p><code>60W</code> average. Peak with UV/IR (never on at the same time): <code>80W</code></p>"},{"location":"hardware-and-software/power-consumption/#flowering-140w","title":"Flowering (<code>140W</code>)","text":"<p><code>100W</code> average. Peak with UV/IR (never on at the same time): <code>140W</code></p>"},{"location":"hardware-and-software/power-consumption/#60x40-area-130w","title":"60x40 area (<code>130W</code>)","text":"<p><code>15W</code> extractor, <code>5W</code> monkey fans: <code>20W</code></p>"},{"location":"hardware-and-software/power-consumption/#60x40-mother-plant-80w","title":"60x40 mother plant (<code>80W</code>)","text":"<p><code>60W</code> average. Peak with IR (never on at the same time): <code>80W</code></p>"},{"location":"hardware-and-software/power-consumption/#60x40-aero-cloner-30w","title":"60x40 aero cloner (<code>30W</code>)","text":"<p><code>26W</code> for the growlight, and let's say <code>4W</code> for the pump: <code>30W</code></p>"},{"location":"hardware-and-software/power-consumption/#monitoring","title":"Monitoring","text":"<p>I'm using a smart plug that supports measuring the total power consumption of the grow setup and is also Tasmota compatible: Tasmota Steckdose NOUS A1T</p> <p>An example payload would look like this:</p> <pre><code>{\n  \"Time\": \"2024-07-24T22:24:32\",\n  \"ENERGY\": {\n    \"TotalStartTime\": \"2024-01-04T15:00:40\",\n    \"Total\": 279.919,\n    \"Yesterday\": 2.499,\n    \"Today\": 2.29,\n    \"Period\": 11,\n    \"Power\": 126,\n    \"ApparentPower\": 178,\n    \"ReactivePower\": 125,\n    \"Factor\": 0.71,\n    \"Voltage\": 296,\n    \"Current\": 0.601\n  }\n}\n</code></pre>"},{"location":"hardware-and-software/relais-and-switches/","title":"Relais and Switches","text":"<p>Can be used for various grow LEDs, fans, pumps, extractors, etc\u2026 (also suitable for 230VAC). I use this one from Elegoo  one here with 8 channels.  Additionally I got some snubbers (link here) to eliminate high voltage spikes caused by switching on inductive loads (currently the 2 pumps)</p>"},{"location":"hardware-and-software/sensors/","title":"Sensors","text":""},{"location":"hardware-and-software/sensors/#temperaturehumidity-sensors","title":"Temperature/Humidity Sensors","text":"<ul> <li>2x BME280: temp, humidity and barometric pressure (I2C), see Tasmota documentation for BME280.   </li> </ul>"},{"location":"hardware-and-software/sensors/#temperature-sensors","title":"Temperature Sensors","text":"<ul> <li>MLX90614: infrared leaf temperature for VPD calculation (I2C), see Tasmota documentation for MLX90614. Warning: you need to compile the binary of Tasmota yourself because it doesn't include this feature in the default binaries. </li> <li>3x DS18B20: for water temperature (analog Sensor), look at Tasmota documentation for more infos and how to connect multiple sensors to one GPIO pin.   </li> </ul>"},{"location":"hardware-and-software/tasmota-rules/","title":"Tasmota Rules","text":"<p>See Tasmota rules documentation for more info (rules can also be set via <code>MQTT</code>).</p>"},{"location":"hardware-and-software/wiring/","title":"Wiring of the electronics","text":"<p>We need to take into account which cable dimensions we use for different loads -  most importantly here is the 100W grow light that we will use. </p>"},{"location":"hardware-and-software/wiring/#cable-dimensions","title":"Cable dimensions","text":"<p><code>0,75 mm\u00b2 (18 AWG)</code> is enough for 12A which which is enough for all the lights (100W/24V=4,16A). I use this set for wiring - features 3 colors and that's enough.</p>"},{"location":"hardware-and-software/wiring/#recommended-connection-terminals","title":"Recommended connection terminals","text":"<ul> <li>Split L, N and PE wires: 3 in, 6 out </li> <li>Connect anything up to 3 wires: 3 in, 3 out </li> <li>Distribute 24V/5V with GND: 2 in, 8 out </li> <li>Distribute 5V/GND: 1 in, 5 out </li> <li>230VAC in: Power plug terminal</li> </ul>"},{"location":"hardware-and-software/wiring/#jstdupont-connectors","title":"JST/Dupont connectors","text":"<p>For the sensors and other devices that require 5V we will use JST/Dupont connectors. This box should be enough for the beginning. Also consider getting a few meters of ribbon cable to connect all the low voltage peripherals. </p>"},{"location":"hardware-and-software/wiring/#dc-sockets-55mm-x-21mm","title":"DC sockets (5.5mm x 2.1mm)","text":"<p>To connect the lights and the ventilation we will use DC sockets that are connected to the relais </p>"},{"location":"hardware-and-software/actors/humidifier/","title":"Humidifier","text":"<p>Especially in the (early) vegetative stages a higher relative humidity is very necessary. I'm using a humidifier from Spider Farmer where you can enter the desired humidity and it will turn on and off automatically.</p> <p></p>"},{"location":"hardware-and-software/actors/lights/","title":"Growlights","text":""},{"location":"hardware-and-software/actors/lights/#60x60x160-area-left","title":"60x60x160 area (left)","text":"<p>20W IR supplement (COL20IR + COL20UV)</p>"},{"location":"hardware-and-software/actors/lights/#when-in-vegetative-period","title":"When in vegetative period","text":"<p>60W (3x 20W) Cosmorrow Grow Kit (TNO40GR)</p>"},{"location":"hardware-and-software/actors/lights/#when-in-flowering-period","title":"When in flowering period","text":"<ul> <li>100W (5x 20W) Cosmorrow Bloom Kit (COM100FS)</li> <li>40W UV supplement (2x COL20IR + COL20UV)</li> </ul>"},{"location":"hardware-and-software/actors/lights/#60x40x100-area-right","title":"60x40x100 area (right)","text":"<p>20W IR supplement (COL20IR)</p>"},{"location":"hardware-and-software/actors/lights/#when-in-vegetative-period_1","title":"When in vegetative period","text":"<p>60W (3x 20W) Cosmorrow Grow Kit (TNO40GR + COP2065)</p>"},{"location":"hardware-and-software/actors/lights/#when-in-flowering-period_1","title":"When in flowering period","text":"<p>100W Spider Farmer SF1000 (link)</p>"},{"location":"hardware-and-software/actors/lights/#60x40x60-area-aeroponic-cloner","title":"60x40x60 area (aeroponic cloner)","text":"<ul> <li>Factory TLED V2.0 26W 6500K Growth (link)</li> </ul>"},{"location":"hardware-and-software/actors/pumps/","title":"Pumps","text":"<p>1 pump each for the aeroponic main system, the aeroponic cloner and the aeration of the nutrient solution for the mother plant.</p>"},{"location":"hardware-and-software/actors/pumps/#aero-main-pump","title":"Aero Main Pump","text":"<p>QWORK\u00ae Mini Wasserpumpen Ultraleise Tauchpumpe - 800 L/H \u2013 15 W</p>"},{"location":"hardware-and-software/actors/pumps/#aero-cloner-pump","title":"Aero Cloner Pump","text":""},{"location":"hardware-and-software/actors/pumps/#airstone-pump","title":"Airstone Pump","text":"<p>Neptune Hydroponics 90l/h</p>"},{"location":"hardware-and-software/actors/ventilation/","title":"Ventilation","text":""},{"location":"hardware-and-software/actors/ventilation/#extraction","title":"Extraction","text":"<ul> <li>DF16E150 15W </li> <li>DF16E350 35W </li> </ul>"},{"location":"hardware-and-software/actors/ventilation/#filters","title":"Filters","text":"<ul> <li>1x 100m3/h</li> <li>1x 150m3/h</li> </ul>"},{"location":"hardware-and-software/actors/ventilation/#air-flow","title":"Air flow","text":"<p>2x MONKEY FAN 24V MF2X120 2.85W each (5.7W in total) </p>"},{"location":"hardware-and-software/converters/ac-dc/","title":"AC-DC Converter","text":"<p>The converter used for 230VAC to 24VDC (to power grow LEDs + ventilation) is this one from DUSKTEC that has 300W which is enough for lights&amp;co. </p>"},{"location":"hardware-and-software/converters/dc-dc/","title":"DC-DC Converter","text":"<p>The ESP32 and (some) sensors require 5V to operate.  The power supply that we have is 24V. To convert the 24V to 5V we will use a DC-DC converter. The converter that we will use is this one from Bauer Electronics. </p>"},{"location":"hardware-and-software/docker-setup/","title":"Base requirements","text":""},{"location":"hardware-and-software/docker-setup/#docker","title":"Docker","text":"<p>TODO: add traefik config in compose file too (or maybe provide one without it)</p> <pre><code>services:\n  mosquitto:\n    image: eclipse-mosquitto:latest\n    container_name: mosquitto\n    restart: always\n    ports:\n      - \"1883:1883\"\n    volumes:\n      - mosquitto_data:/mosquitto/data\n      - mosquitto_logs:/mosquitto/log\n      - ./config:/mosquitto/config\n    command: mosquitto -c /mosquitto/config/mosquitto.conf\n    networks:\n      - iot\n\n  telegraf:\n    image: telegraf:latest\n    container_name: telegraf\n    restart: always\n    volumes:\n      - ./telegraf.conf:/etc/telegraf/telegraf.conf:ro\n    networks:\n      - iot\n    depends_on:\n      - mosquitto\n      - influxdb\n\n  influxdb:\n    image: influxdb:latest\n    restart: always\n    container_name: influxdb\n    volumes:\n      - influxdb_data:/var/lib/influxdb2\n      - influxdb_config:/etc/influxdb2\n    networks:\n      - iot\n      - back-tier\n    labels:\n      - \"traefik.enable=true\"\n      - \"traefik.docker.network=traefik\"\n      - \"traefik.frontend.rule=Host:&lt;your.influxdb.host&gt;\"\n      - \"traefik.port=8086\"\n    environment:\n      - DOCKER_INFLUXDB_INIT_MODE=setup\n      - DOCKER_INFLUXDB_INIT_USERNAME=admin\n      - DOCKER_INFLUXDB_INIT_PASSWORD=&lt;your-password&gt;\n      - DOCKER_INFLUXDB_INIT_ORG=ludi\n      - DOCKER_INFLUXDB_INIT_BUCKET=mqtt\n      - DOCKER_INFLUXDB_INIT_ADMIN_TOKEN=&lt;your-admin-token&gt;\n\n  grafana:\n    image: grafana/grafana\n    container_name: grafana\n    restart: always\n    labels:\n      - \"traefik.enable=true\"\n      - \"traefik.docker.network=traefik\"\n      - \"traefik.frontend.rule=Host:&lt;your.grafana.host&gt;\"\n      - \"traefik.port=3000\"\n    networks:\n      - iot\n      - back-tier\n    volumes:\n      - ./grafana-provisioning:/etc/grafana/provisioning\n      - grafana-data:/var/lib/grafana\n    environment:\n      GF_SECURITY_ADMIN_PASSWORD: &lt;your-admin-password&gt;\n    depends_on:\n      - influxdb\n\n  node-red:\n    image: nodered/node-red:latest\n    container_name: node-red\n    restart: always\n    ports:\n      - \"1880:1880\"\n    volumes:\n      - node_red_data:/data\n    networks:\n      - iot\n      - back-tier\n    labels:\n      - \"traefik.enable=true\"\n      - \"traefik.docker.network=traefik\"\n      - \"traefik.frontend.rule=Host:&lt;your.node-red.host&gt;\"\n      - \"traefik.port=1880\"\n      - \"traefik.frontend.entryPoints=https\"\n      - \"traefik.frontend.redirect.entryPoint=https\"\n      - \"traefik.frontend.redirect.permanent=true\"\n    environment:\n      - TZ=Europe/Vienna\n\nnetworks:\n  iot:\n  back-tier:\n    external:\n      name: traefik\n\nvolumes:\n  mosquitto_data:\n  mosquitto_logs:\n  influxdb_data:\n  influxdb_config:\n  grafana-data:\n  node_red_data:\n</code></pre>"},{"location":"hardware-and-software/docker-setup/grafana/","title":"Grafana","text":"<p>Displays the sensor data </p>"},{"location":"hardware-and-software/docker-setup/influxdb/","title":"InfluxDB","text":"<p>Saves the sensor data </p>"},{"location":"hardware-and-software/docker-setup/mosquitto/","title":"Eclipse Mosquitto","text":"<p>MQTT Broker</p>"},{"location":"hardware-and-software/docker-setup/node-red/","title":"Node-red","text":"<p>Flow editor for controlling/regulating environment conditions, lights + Pumps </p>"},{"location":"hardware-and-software/docker-setup/telegraf/","title":"Telegraf","text":"<p>used to persist MQTT data into InfluxDB</p>"}]}